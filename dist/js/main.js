"use strict";var inputTitle,addForm=document.querySelector(".add-form");addForm.addEventListener("submit",function(e){return handleSubmit(e)}),document.addEventListener("scroll",function(e){return checkForNewContent()});var resultsDiv,startIndex=0;function handleSubmit(e){e.preventDefault(),validateInput(inputTitle=document.querySelector(".input-title").value)&&fetchBooks(inputTitle,!0,startIndex)}function fetchBooks(e,n,t){fetch("https://www.googleapis.com/books/v1/volumes?q=+intitle:".concat(e,"&startIndex=").concat(t)).then(function(e){return e.json()}).then(function(e){resultsDiv=document.querySelector(".results");var t=createCards(e.items);n&&deletePrevResults(),resultsDiv.appendChild(t)}).catch(function(e){return console.log(e)})}function deletePrevResults(){for(;resultsDiv.firstChild;)resultsDiv.removeChild(resultsDiv.firstChild)}function createCards(e){var r=document.createDocumentFragment();return e.map(function(e){var t,n;t=e.volumeInfo.imageLinks?e.volumeInfo.imageLinks.thumbnail:"",n=e.volumeInfo.description?e.volumeInfo.description.split(" ").slice(0,18).join(" ")+"...":"There is no description provided for this book";var i=document.createElement("div");i.classList+="card",i.innerHTML='\n    <div class="card-image">\n      <img src="'.concat(t,'" alt="No Image">\n      <span class="card-title">').concat(e.volumeInfo.title,'</span>\n    </div>\n    <div class="card-content">\n      <p>').concat(n,"</p>\n    </div>\n    "),r.append(i)}),r}function validateInput(e){var t=document.querySelector(".error");return!!e||!(t.textContent="Title is required")}function checkForNewContent(){var e=document.querySelector(".results > div:last-child");if(e.offsetTop+e.clientHeight<window.pageYOffset+window.innerHeight){if(!inputTitle)return;var t=document.createElement("div");resultsDiv.appendChild(t),fetchBooks(inputTitle,!1,startIndex+=10)}}